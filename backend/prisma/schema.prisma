// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          Int      @id @default(autoincrement())
  userName    String?  @unique @default("")
  OAuthName   String   @unique
  email       String?  @unique @default("")
  avatar      String?  @default("https://avatarfiles.alphacoders.com/183/183501.jpg")
  updatedAt   DateTime @updatedAt
  accessToken String   @default("None")
  is2Fa       Boolean  @default(false)
  homeMatches Match[]  @relation("home")
  awayMatches Match[] @relation("away")
  wonMatches  Match[] @relation("winner")
}

model Match {
  id      Int      @id @default(autoincrement())
  started DateTime
  ended   DateTime

  homePlayer   User @relation("home", fields: [homePlayerId], references: [id])
  homePlayerId Int

  awayPlayer   User @relation("away", fields: [awayPlayerId], references: [id])
  awayPlayerId Int

  winner   User @relation("winner", fields: [winnerId], references: [id])
  winnerId Int

  homeScore Int
  awayScore Int
}

model Jimmy {
  id      Int      @id @default(autoincrement())
  started DateTime
  ended   DateTime
  homeScore Int
  awayScore Int
}
