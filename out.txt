#1 [database internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [database internal] load build definition from Dockerfile
#2 transferring dockerfile: 66B done
#2 DONE 0.0s

#3 [database internal] load metadata for docker.io/library/postgres:13
#3 DONE 0.0s

#4 [database 1/1] FROM docker.io/library/postgres:13
#4 CACHED

#5 [database] exporting to image
#5 exporting layers done
#5 writing image sha256:7f76fb26ba751a4d5469908ed57e4a165d5c016b86031c3cf1e8a3992fa2adf1 done
#5 naming to docker.io/library/transcendence-database done
#5 DONE 0.0s

#6 [backend internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [backend internal] load build definition from Dockerfile
#7 transferring dockerfile: 200B done
#7 DONE 0.0s

#8 [backend internal] load metadata for docker.io/library/node:20.5.0
#8 DONE 1.4s

#9 [backend 1/6] FROM docker.io/library/node:20.5.0@sha256:32ec50b65ac9572eda92baa6004a04dbbfc8021ea806fa62d37336183cad04e6
#9 DONE 0.0s

#10 [backend internal] load build context
#10 transferring context: 2.92kB done
#10 DONE 0.0s

#11 [backend 2/6] WORKDIR /app
#11 CACHED

#12 [backend 3/6] COPY package*.json ./
#12 CACHED

#13 [backend 4/6] RUN npm install
#13 CACHED

#14 [backend 5/6] COPY . .
#14 DONE 0.0s

#15 [backend 6/6] RUN yarn prisma generate
#15 0.303 yarn run v1.22.19
#15 0.321 $ /app/node_modules/.bin/prisma generate
#15 0.689 Prisma schema loaded from prisma/schema.prisma
#15 1.064 
#15 1.064 âœ” Generated Prisma Client (5.0.0 | library) to ./node_modules/@prisma/client in 61ms
#15 1.064 You can now start using Prisma Client in your code. Reference: https://pris.ly/d/client
#15 1.064 ```
#15 1.064 import { PrismaClient } from '@prisma/client'
#15 1.064 const prisma = new PrismaClient()
#15 1.064 ```
#15 1.085 Done in 0.79s.
#15 DONE 1.1s

#16 [backend] exporting to image
#16 exporting layers 0.1s done
#16 writing image sha256:372edaf606b7e7430476cda1919ae6644280481f0392ce7016e522a964c6f367 done
#16 naming to docker.io/library/transcendence-backend done
#16 DONE 0.1s
Attaching to transcendence-backend-1, transcendence-database-1
transcendence-database-1  | The files belonging to this database system will be owned by user "postgres".
transcendence-database-1  | This user must also own the server process.
transcendence-database-1  | 
transcendence-database-1  | The database cluster will be initialized with locale "en_US.utf8".
transcendence-database-1  | The default database encoding has accordingly been set to "UTF8".
transcendence-database-1  | The default text search configuration will be set to "english".
transcendence-database-1  | 
transcendence-database-1  | Data page checksums are disabled.
transcendence-database-1  | 
transcendence-database-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
transcendence-database-1  | creating subdirectories ... ok
transcendence-database-1  | selecting dynamic shared memory implementation ... posix
transcendence-database-1  | selecting default max_connections ... 
transcendence-database-1  | 100
transcendence-database-1  | selecting default shared_buffers ... 
transcendence-database-1  | 128MB
transcendence-database-1  | selecting default time zone ... 
transcendence-database-1  | Etc/UTC
transcendence-database-1  | creating configuration files ... 
transcendence-database-1  | ok
transcendence-database-1  | running bootstrap script ... 
transcendence-database-1  | ok
transcendence-database-1  | performing post-bootstrap initialization ... 
transcendence-backend-1   | 
transcendence-backend-1   | > median@0.0.1 start:migrate:prod
transcendence-backend-1   | > prisma migrate deploy && npm run start:dev
transcendence-backend-1   | 
transcendence-backend-1   | 
transcendence-database-1  | ok
transcendence-database-1  | syncing data to disk ... 
transcendence-database-1  | ok
transcendence-database-1  | 
transcendence-database-1  | 
transcendence-database-1  | Success. You can now start the database server using:
transcendence-database-1  | 
transcendence-database-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
transcendence-database-1  | 
transcendence-database-1  | 
transcendence-database-1  | waiting for server to start....
transcendence-database-1  | 2023-07-22 09:38:11.186 UTC [49] LOG:  starting PostgreSQL 13.11 (Debian 13.11-1.pgdg120+1) on aarch64-unknown-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
transcendence-database-1  | 2023-07-22 09:38:11.187 UTC [49] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
transcendence-database-1  | 2023-07-22 09:38:11.190 UTC [50] LOG:  database system was shut down at 2023-07-22 09:38:11 UTC
transcendence-database-1  | 2023-07-22 09:38:11.195 UTC [49] LOG:  database system is ready to accept connections
transcendence-database-1  |  done
transcendence-database-1  | server started
transcendence-backend-1   | Prisma schema loaded from prisma/schema.prisma
transcendence-backend-1   | Datasource "db": PostgreSQL database "median-db", schema "public" at "database:5432"
transcendence-backend-1   | 
transcendence-backend-1   | 
transcendence-database-1  | CREATE DATABASE
transcendence-database-1  | 
transcendence-database-1  | 
transcendence-database-1  | 
transcendence-database-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
transcendence-database-1  | 
transcendence-database-1  | 
transcendence-database-1  | waiting for server to shut down...2023-07-22 09:38:11.369 UTC [49] LOG:  received fast shutdown request
transcendence-database-1  | .
transcendence-database-1  | 2023-07-22 09:38:11.369 UTC [49] LOG:  aborting any active transactions
transcendence-database-1  | 2023-07-22 09:38:11.374 UTC [49] LOG:  background worker "logical replication launcher" (PID 56) exited with exit code 1
transcendence-database-1  | 2023-07-22 09:38:11.375 UTC [51] LOG:  shutting down
transcendence-database-1  | 2023-07-22 09:38:11.385 UTC [49] LOG:  database system is shut down
transcendence-backend-1 exited with code 1
transcendence-database-1  |  done
transcendence-database-1  | server stopped
transcendence-database-1  | 
transcendence-database-1  | PostgreSQL init process complete; ready for start up.
transcendence-database-1  | 
transcendence-database-1  | 
transcendence-backend-1   | 
transcendence-backend-1   | > median@0.0.1 start:migrate:prod
transcendence-backend-1   | > prisma migrate deploy && npm run start:dev
transcendence-backend-1   | 
transcendence-backend-1   | 
transcendence-backend-1   | Prisma schema loaded from prisma/schema.prisma
transcendence-backend-1   | Datasource "db": PostgreSQL database "median-db", schema "public" at "database:5432"
transcendence-backend-1   | 
transcendence-backend-1   | 1 migration found in prisma/migrations
transcendence-backend-1   | 
transcendence-backend-1   | 
transcendence-backend-1   | Applying migration `20230722082656_init`
transcendence-backend-1   | 
transcendence-backend-1   | 
transcendence-backend-1   | The following migration have been applied:
transcendence-backend-1   | 
transcendence-backend-1   | migrations/
transcendence-backend-1   |   â””â”€ 20230722082656_init/
transcendence-backend-1   |     â””â”€ migration.sql
transcendence-backend-1   |       
transcendence-backend-1   | All migrations have been successfully applied.
transcendence-backend-1   | 
transcendence-backend-1   | 
transcendence-backend-1   | > median@0.0.1 start:dev
transcendence-backend-1   | > nest start --watch
transcendence-backend-1   | 
transcendence-backend-1   | 
transcendence-backend-1   | c
transcendence-backend-1   | [[90m9:38:12 AM[0m] Starting compilation in watch mode...
transcendence-backend-1   | 
transcendence-backend-1   | 
transcendence-backend-1   | [[90m9:38:14 AM[0m] Found 0 errors. Watching for file changes.
transcendence-backend-1   | 
transcendence-backend-1   | 
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPrismaModule dependencies initialized[39m[38;5;3m +13ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mArticlesModule dependencies initialized[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUsersModule dependencies initialized[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFollowsModule dependencies initialized[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +17ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mArticlesController {/articles}:[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/articles, POST} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/articles/drafts, GET} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/articles, GET} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/articles/:id, GET} route[39m[38;5;3m +1ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/articles/:id, PATCH} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/articles/:id, DELETE} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUsersController {/users}:[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/users, POST} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/users, GET} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/users/:id, GET} route[39m[38;5;3m +1ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/users/:id, PATCH} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/users/:id, DELETE} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFollowsController {/follows}:[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/follows, GET} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/follows/pending, GET} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/follows/following/:followingId, GET} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/follows/followers/:followerId, GET} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/follows/friends/:followerId&:followingId, GET} route[39m[38;5;3m +1ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/follows, POST} route[39m[38;5;3m +0ms[39m
transcendence-backend-1   | [32m[Nest] 123  - [39m07/22/2023, 9:38:14 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
